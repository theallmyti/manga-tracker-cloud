<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Manga Library</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>
<!-- Sidebar -->
<aside id="sidebar" class="sidebar glass">
  <div class="logo-row">
    <img src="logo.jpg" alt="Logo" class="logo-mark">
    <div class="logo-text">Manga Library</div>
  </div>

  <div class="glass panel">
    <div class="label">Theme</div>
    <div class="switch-row">
      <span class="text-mutedx">Toggle</span>
      <label class="switch"><input type="checkbox" id="themeSwitch"><span class="slider"></span></label>
    </div>
  </div>

  <div class="glass panel" id="userPanel">
    <div class="label">Account</div>
    <div id="userEmail" class="mb-2 text-truncate"></div>
    <button id="logoutBtn" class="btnx w-100">Logout</button>
  </div>

  <div class="glass panel" id="addPanel">
    <div class="label">Library</div>
    <button id="openAdd" class="btnx w-100">Add</button>
  </div>

  <div class="text-mutedx mt-auto">&copy; <span id="year"></span> Manga Library</div>
</aside>

<div id="scrim" class="scrim"></div>

<!-- Add Modal -->
<div id="modalScrim" class="modal-scrim"></div>
<div id="addModal" class="modalx">
  <div class="glass p-3">
    <h5>Add Series</h5>
    <input id="m_title" class="form-control mb-2" placeholder="Title">
    <input id="m_chapter" class="form-control mb-2" placeholder="Chapter" type="number">
    <select id="m_status" class="form-select mb-2"><option>Ongoing</option><option>Completed</option></select>
    <input id="m_url" class="form-control mb-2" placeholder="URL">
    <input id="m_cover" class="form-control mb-2" placeholder="Cover URL">
    <div class="d-flex justify-content-end gap-2">
      <button id="cancelAdd" class="btnx">Cancel</button>
      <button id="saveAdd" class="btnx">Save</button>
    </div>
  </div>
</div>

<!-- Delete Modal -->
<div id="delScrim" class="del-scrim"></div>
<div id="delModal" class="del-modal">
  <div class="glass p-3">
    <h5>Delete Entry</h5>
    <p class="text-mutedx">Are you sure you want to delete this entry? This action cannot be undone.</p>
    <div class="d-flex justify-content-end gap-2">
      <button id="delCancel" class="btnx">Cancel</button>
      <button id="delConfirm" class="btnx btn-dangerx">Delete</button>
    </div>
  </div>
</div>

<div id="toastWrap" class="glass-toast-wrap"></div>

<div class="container-narrow app-layout">
  <header class="topbar glass">
    <button id="openSidebar" class="brand-btn">
      <img src="logo.jpg" alt="Logo" class="logo-mark">
      <span class="brand-text">Manga Library</span>
    </button>
  </header>

  <div id="auth"></div>
  <section id="app" class="hidden">
    <div class="glass p-3 mt-3 d-flex flex-wrap gap-2">
      <input id="searchInput" class="form-control flex-grow-1" placeholder="Search...">
      <select id="statusFilter" class="form-select w-auto">
        <option value="">All</option>
        <option value="Ongoing">Ongoing</option>
        <option value="Completed">Completed</option>
      </select>
      <button id="refreshBtn" class="btnx">Refresh</button>
    </div>
    <div id="resultCount" class="text-mutedx mt-2">Loading...</div>
    <div id="grid" class="grid"></div>
  </section>
</div>

<!-- Inline Status Editor -->
<div id="statusPopup" class="glass status-popup hidden">
  <select id="statusDropdown" class="form-select mb-2">
    <option value="Ongoing">Ongoing</option>
    <option value="Completed">Completed</option>
    <option value="On Hold">On Hold</option>
    <option value="Custom">Custom...</option>
  </select>
  <input id="statusCustomInput" class="form-control mb-2" placeholder="Enter custom status" style="display:none;">
  <div class="d-flex justify-content-end gap-2">
    <button id="statusCancel" class="btnx btn-sm">Cancel</button>
    <button id="statusSave" class="btnx btn-sm">Save</button>
  </div>
</div>


<script src="app.js"></script>
</body>
</html>
